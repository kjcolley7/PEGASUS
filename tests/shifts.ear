.import "test_suite.ear"

.scope
@test:
	// SHL  Rx, Ry
	// assert(1 << 1 == 2);
	MOV     A0, 1
	MOV     A1, 1
	SHL     A0, A1
	CMP     A0, 2
	BPT.NE
	ORR.NE  S2, 1 << 0
	
	// SHL  Rx, Imm8
	// assert(1 << 5 == 32);
	MOV     A0, 1
	SHL     A0, 5
	CMP     A0, 32
	BPT.NE
	ORR.NE  S2, 1 << 1
	
	// SHL  Rd, Rx, Ry
	// assert(3 << 1 == 6);
	MOV     A0, 3
	MOV     A1, 1
	SHL     A2, A0, A1
	CMP     A2, 6
	BPT.NE
	ORR.NE  S2, 1 << 2
	
	// SRU
	// assert(4 >> 1 == 2);
	MOV     A0, 4
	MOV     A1, 1
	SRU     A0, A1
	CMP     A0, 2
	BPT.NE
	ORR.NE  S2, 1 << 3
	
	// SRU
	// assert(0x8000 >> 15 == 1);
	MOV     A0, 0x8000
	SRU     A0, 15
	CMP     A0, 1
	BPT.NE
	ORR.NE  S2, 1 << 4
	
	// SRS
	// assert(4 >> 1 == 2);
	MOV     A0, 4
	SRS     A0, 1
	CMP     A0, 2
	BPT.NE
	ORR.NE  S2, 1 << 5
	
	// SRS
	// assert(0x8000 >> 15 == 0xFFFF);
	MOV     A0, 0x8000
	SRS     A0, 15
	CMP     A0, 0xFFFF
	BPT.NE
	ORR.NE  S2, 1 << 6
	
	RET
